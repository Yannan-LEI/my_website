---
title: "Trump's Approval Margins"
output:
  html_document:
    theme: flatly
    highlight: zenburn
    number_sections: yes
    toc: yes
    toc_float: yes
    code_folding: show
  pdf_document:
    toc: yes
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>##Trump’s Approval Margins</p>
<p>As we saw in class, fivethirtyeight.com has detailed data on <a href="https://projects.fivethirtyeight.com/trump-approval-ratings">all polls that track the president’s approval</a></p>
<pre class="r"><code># Import approval polls data
approval_polllist &lt;- read_csv(here::here(&quot;data&quot;, &quot;approval.csv&quot;)) 


# or directly off fivethirtyeight website
# approval_polllist &lt;- read_csv(&#39;https://projects.fivethirtyeight.com/trump-approval-data/approval_polllist.csv&#39;) 

glimpse(approval_polllist)</code></pre>
<pre><code>## Rows: 15,837
## Columns: 22
## $ president           &lt;chr&gt; &quot;Donald Trump&quot;, &quot;Donald Trump&quot;, &quot;Donald Trump&quot;,...
## $ subgroup            &lt;chr&gt; &quot;All polls&quot;, &quot;All polls&quot;, &quot;All polls&quot;, &quot;All pol...
## $ modeldate           &lt;chr&gt; &quot;10/16/2020&quot;, &quot;10/16/2020&quot;, &quot;10/16/2020&quot;, &quot;10/1...
## $ startdate           &lt;chr&gt; &quot;1/20/2017&quot;, &quot;1/20/2017&quot;, &quot;1/20/2017&quot;, &quot;1/21/20...
## $ enddate             &lt;chr&gt; &quot;1/22/2017&quot;, &quot;1/22/2017&quot;, &quot;1/24/2017&quot;, &quot;1/23/20...
## $ pollster            &lt;chr&gt; &quot;Gallup&quot;, &quot;Morning Consult&quot;, &quot;Ipsos&quot;, &quot;Gallup&quot;,...
## $ grade               &lt;chr&gt; &quot;B&quot;, &quot;B/C&quot;, &quot;B-&quot;, &quot;B&quot;, &quot;B-&quot;, &quot;B+&quot;, &quot;B&quot;, &quot;C+&quot;, &quot;...
## $ samplesize          &lt;dbl&gt; 1500, 1992, 1632, 1500, 1651, 1190, 1500, 1500,...
## $ population          &lt;chr&gt; &quot;a&quot;, &quot;rv&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;rv&quot;, &quot;a&quot;, &quot;lv&quot;, &quot;a&quot;,...
## $ weight              &lt;dbl&gt; 0.262, 0.680, 0.153, 0.243, 0.142, 1.514, 0.227...
## $ influence           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ approve             &lt;dbl&gt; 45.0, 46.0, 42.1, 45.0, 42.3, 36.0, 46.0, 57.0,...
## $ disapprove          &lt;dbl&gt; 45.0, 37.0, 45.2, 46.0, 45.8, 44.0, 45.0, 43.0,...
## $ adjusted_approve    &lt;dbl&gt; 45.8, 45.5, 43.3, 45.8, 43.5, 37.7, 46.8, 51.6,...
## $ adjusted_disapprove &lt;dbl&gt; 43.6, 38.2, 43.9, 44.6, 44.5, 42.8, 43.6, 44.5,...
## $ multiversions       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ tracking            &lt;lgl&gt; TRUE, NA, TRUE, TRUE, TRUE, NA, TRUE, TRUE, TRU...
## $ url                 &lt;chr&gt; &quot;http://www.gallup.com/poll/201617/gallup-daily...
## $ poll_id             &lt;dbl&gt; 49253, 49249, 49426, 49262, 49425, 49260, 49236...
## $ question_id         &lt;dbl&gt; 77265, 77261, 77599, 77274, 77598, 77272, 77248...
## $ createddate         &lt;chr&gt; &quot;1/23/2017&quot;, &quot;1/23/2017&quot;, &quot;3/1/2017&quot;, &quot;1/24/201...
## $ timestamp           &lt;chr&gt; &quot;19:12:25 16 Oct 2020&quot;, &quot;19:12:25 16 Oct 2020&quot;,...</code></pre>
<pre class="r"><code># Use `lubridate` to fix dates, as they are given as characters.


approval_polllist &lt;- approval_polllist  %&gt;%
  mutate(modeldate = mdy(modeldate),startdate = mdy(startdate), enddate = mdy(enddate))
glimpse(approval_polllist)</code></pre>
<pre><code>## Rows: 15,837
## Columns: 22
## $ president           &lt;chr&gt; &quot;Donald Trump&quot;, &quot;Donald Trump&quot;, &quot;Donald Trump&quot;,...
## $ subgroup            &lt;chr&gt; &quot;All polls&quot;, &quot;All polls&quot;, &quot;All polls&quot;, &quot;All pol...
## $ modeldate           &lt;date&gt; 2020-10-16, 2020-10-16, 2020-10-16, 2020-10-16...
## $ startdate           &lt;date&gt; 2017-01-20, 2017-01-20, 2017-01-20, 2017-01-21...
## $ enddate             &lt;date&gt; 2017-01-22, 2017-01-22, 2017-01-24, 2017-01-23...
## $ pollster            &lt;chr&gt; &quot;Gallup&quot;, &quot;Morning Consult&quot;, &quot;Ipsos&quot;, &quot;Gallup&quot;,...
## $ grade               &lt;chr&gt; &quot;B&quot;, &quot;B/C&quot;, &quot;B-&quot;, &quot;B&quot;, &quot;B-&quot;, &quot;B+&quot;, &quot;B&quot;, &quot;C+&quot;, &quot;...
## $ samplesize          &lt;dbl&gt; 1500, 1992, 1632, 1500, 1651, 1190, 1500, 1500,...
## $ population          &lt;chr&gt; &quot;a&quot;, &quot;rv&quot;, &quot;a&quot;, &quot;a&quot;, &quot;a&quot;, &quot;rv&quot;, &quot;a&quot;, &quot;lv&quot;, &quot;a&quot;,...
## $ weight              &lt;dbl&gt; 0.262, 0.680, 0.153, 0.243, 0.142, 1.514, 0.227...
## $ influence           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ approve             &lt;dbl&gt; 45.0, 46.0, 42.1, 45.0, 42.3, 36.0, 46.0, 57.0,...
## $ disapprove          &lt;dbl&gt; 45.0, 37.0, 45.2, 46.0, 45.8, 44.0, 45.0, 43.0,...
## $ adjusted_approve    &lt;dbl&gt; 45.8, 45.5, 43.3, 45.8, 43.5, 37.7, 46.8, 51.6,...
## $ adjusted_disapprove &lt;dbl&gt; 43.6, 38.2, 43.9, 44.6, 44.5, 42.8, 43.6, 44.5,...
## $ multiversions       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ tracking            &lt;lgl&gt; TRUE, NA, TRUE, TRUE, TRUE, NA, TRUE, TRUE, TRU...
## $ url                 &lt;chr&gt; &quot;http://www.gallup.com/poll/201617/gallup-daily...
## $ poll_id             &lt;dbl&gt; 49253, 49249, 49426, 49262, 49425, 49260, 49236...
## $ question_id         &lt;dbl&gt; 77265, 77261, 77599, 77274, 77598, 77272, 77248...
## $ createddate         &lt;chr&gt; &quot;1/23/2017&quot;, &quot;1/23/2017&quot;, &quot;3/1/2017&quot;, &quot;1/24/201...
## $ timestamp           &lt;chr&gt; &quot;19:12:25 16 Oct 2020&quot;, &quot;19:12:25 16 Oct 2020&quot;,...</code></pre>
<div id="create-a-plot" class="section level2">
<h2>Create a plot</h2>
<p>What I would like you to do is to calculate the average net approval rate (approve- disapprove) for each week since he got into office. I want you plot the net approval, along with its 95% confidence interval. There are various dates given for each poll, please use <code>enddate</code>, i.e., the date the poll ended.</p>
<p><img src="D:/matProject/my_website/data/trump_approval_margin.png" width="100%" style="display: block; margin: auto;" /></p>
<pre><code>## # A tibble: 15,837 x 3
##    enddate    approve disapprove
##    &lt;date&gt;       &lt;dbl&gt;      &lt;dbl&gt;
##  1 2017-01-22    45         45  
##  2 2017-01-22    46         37  
##  3 2017-01-24    42.1       45.2
##  4 2017-01-23    45         46  
##  5 2017-01-25    42.3       45.8
##  6 2017-01-25    36         44  
##  7 2017-01-24    46         45  
##  8 2017-01-24    57         43  
##  9 2017-01-25    46         45  
## 10 2017-01-24    44         44  
## # ... with 15,827 more rows</code></pre>
<pre><code>## # A tibble: 15,837 x 4
##    enddate    approve disapprove netapprovalrate
##    &lt;date&gt;       &lt;dbl&gt;      &lt;dbl&gt;           &lt;dbl&gt;
##  1 2017-01-22    45         45               0  
##  2 2017-01-22    46         37               9  
##  3 2017-01-24    42.1       45.2            -3.1
##  4 2017-01-23    45         46              -1  
##  5 2017-01-25    42.3       45.8            -3.5
##  6 2017-01-25    36         44              -8  
##  7 2017-01-24    46         45               1  
##  8 2017-01-24    57         43              14  
##  9 2017-01-25    46         45               1  
## 10 2017-01-24    44         44               0  
## # ... with 15,827 more rows</code></pre>
<pre><code>## # A tibble: 196 x 10
##     year  week   mean sd_rate count t_critical se_rate margin_of_error rate_low
##    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;      &lt;dbl&gt;   &lt;dbl&gt;           &lt;dbl&gt;    &lt;dbl&gt;
##  1  2017     3  4.5      5.20     4       3.18   2.60            8.27     -3.77
##  2  2017     4  0.647    6.82    49       2.01   0.974           1.96     -1.31
##  3  2017     5 -1.99     5.22    73       1.99   0.611           1.22     -3.21
##  4  2017     6 -4.55     6.39    79       1.99   0.719           1.43     -5.98
##  5  2017     7 -6.14     6.74    87       1.99   0.723           1.44     -7.58
##  6  2017     8 -5.27     5.68    80       1.99   0.635           1.26     -6.54
##  7  2017     9 -3.63     4.53    83       1.99   0.497           0.989    -4.61
##  8  2017    10 -5.02     5.58    88       1.99   0.595           1.18     -6.20
##  9  2017    11 -7.05     5.65    81       1.99   0.627           1.25     -8.30
## 10  2017    12 -8.44     6.81    82       1.99   0.752           1.50     -9.94
## # ... with 186 more rows, and 1 more variable: rate_high &lt;dbl&gt;</code></pre>
<p><img src="/projects/project2_files/figure-html/trump_margins-2.png" width="100%" style="display: block; margin: auto;" />
We can observe that the range for week 15 is lower than the range for week 34. This means that the degree of certainty of the results is more in week 15 when compared to the degree of certainty of results of week 34. This could be because the average sample size in week 15 is greater than the average sample size in week 34. As the sample size increases, the variation around the mean reduces, giving us a narrower confidence interval.</p>
</div>
